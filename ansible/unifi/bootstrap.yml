---

- name: Launch server
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    hash: "{{ 99999999 | random | to_uuid | hash('sha1') }}"
    vm_name: "{{ vm_type }}-{{ hash[:6] }}"
    vm_template: "ubuntu-template"
    vm_type: "unifi"
    vm_disk_size: 20

  roles:
    - ../roles/vcenter/launch_instance

- name: Setup unifi
  hosts: instances
  user: ubuntu
  become: yes

  roles:
    - unifi
